#!/usr/bin/env node

'use strict'

/* npm modules */
const commander = require('commander')

/* app modules */
const Publisher = require('../lib/publisher')

commander.command('publish <page|video> <files...>')
    .option('--api <url>', 'host of ciph api (default: https://ciph.io)')
    .option('--json', 'output results in json')
    .option('--key <key>', 'password for container')
    .option('--quiet', 'do not log info')
    .option('--title <title>', 'title for content displayed to user')
    .option('--verify', 'download and verify files after publish')
    .option('--work-path <path>', 'directory to store intermediate files in')
    .action(async function () {
        try {
            await Publisher.publish.apply(null, Array.from(arguments))
        }
        catch (err) {
            console.error(err.stack)
        }
    })

commander.parse(process.argv)